<div class="container" >
    <div class="comapny_section">
        <div class="com_list ">
    <div class="cpm-sec">

        <h2>Create Holiday Calendar</h2><hr>

        <mat-tab-group>
          <mat-tab label="Create Holiday Calendar">

            <form>

                <div class="row">
                    <div class="col-md-4" >
       
                        <label>year</label>
                    
                        <div class="custom-sel">
                            <select class="form-control" [(ngModel)]="year" [ngModelOptions]="{standalone: true}">
                                <option>2000</option>
                                <option>2001</option>
                                <option>2002</option>
                                <option>2003</option>
                                <option>2004</option>
                                <option>2005</option>
                                <option>2006</option>
                                <option>2007</option>
                                <option>2008</option>
                                <option>2009</option>
                                <option>2010</option>
                                <option>2011</option>
                                <option>2012</option>
                                <option>2013</option>
                                <option>2014</option>
                                <option>2015</option>
                                <option>2016</option>
                                <option>2017</option>
                                <option>2018</option>
                                <option>2019</option>
                                <option>2020</option>
                                <option>2021</option>
                                <option>2022</option>
                                <option>2023</option>
                                <option>2024</option>
                                <option>2025</option>
                                <option>2026</option>
                                <option>2027</option>
                                <option>2028</option>
                                <option>2029</option>
                                <option>2030</option>
                                <option>2031</option>
                                <option>2032</option>
                                <option>2033</option>
                                <option>2034</option>
                                <option>2035</option>
                                <option>2036</option>
                                <option>2037</option>
                                <option>2038</option>
                                <option>2039</option>
                                <option>2040</option>
                                <option>2041</option>
                                <option>2042</option>
                                <option>2043</option>
                                <option>2044</option>
                                <option>2045</option>
                                <option>2046</option>
                                <option>2047</option>
                                <option>2048</option>
                                <option>2049</option>
                                <option>2050</option>
                                <option>2051</option>
                                <option>2052</option>
                                <option>2053</option>
                                <option>2054</option>
                                <option>2055</option>
                                <option>2056</option>
                                <option>2057</option>
                                <option>2058</option>
                                <option>2059</option>
                                <option>2060</option>
                                <option>2061</option>
                                <option>2062</option>
                                <option>2063</option>
                                <option>2064</option>
                                <option>2065</option>
                                <option>2066</option>
                                <option>2067</option>
                                <option>2068</option>
                                <option>2069</option>
                                <option>2070</option>
                                <option>2071</option>
                                <option>2072</option>
                                <option>2073</option>
                                <option>2074</option>
                                <option>2075</option>
                                <option>2076</option>
                                <option>2077</option>
                                <option>2078</option>
                                <option>2079</option>
                                <option>2080</option>
                                <option>2081</option>
                                <option>2082</option>
                                <option>2083</option>
                                <option>2084</option>
                                <option>2085</option>
                                <option>2086</option>
                                <option>2087</option>
                                <option>2088</option>
                                <option>2089</option>
                                <option>2090</option>
                                <option>2091</option>
                                <option>2092</option>
                                <option>2093</option>
                                <option>2094</option>
                                <option>2095</option>
                                <option>2096</option>
                                <option>2097</option>
                                <option>2098</option>
                                <option>2099</option>
                                <option>2100</option>
                            </select>
                        </div>
                       <!-- <input type="date"  class="form-control" required  [(ngModel)]="year"  placeholder="Enter year "
                        [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !year}">
                       
                       <div *ngIf="registerButtonClicked && !year" class="error-message">year is required.</div> -->
                    </div>


                    <div class="col-md-4" >
       
                        <label>Calendar Title</label>
                       <input type="text"  class="form-control" required  [(ngModel)]="calendar_title"  placeholder="Enter calendar title "
                        [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !calendar_title}">
                       
                       <div *ngIf="registerButtonClicked && !calendar_title" class="error-message">calendar title is required.</div>
                  </div>

                
                </div>

                <style>
                    .mat-mdc-form-field-infix{
                        margin-top: -14px;
                    }

                    .mdc-text-field--filled:not(.mdc-text-field--disabled) {
                        background-color: white;
                    }
                </style>

                <div  class="row mt-4">
                    <div class="col-md-10"></div>

                    <div class="col-md-2">
                        <button type="button" class="btn-Create btn-full mt-5 btn-success btn" (click)="registerHolidayCalendarYear()">Create</button>  

                    </div>
                </div>

            </form>
        </mat-tab>
            <mat-tab label="Create Holidays ">

                <form >

                    <div class="row">
                        <div class="col-md-3" >
                       
                            <label>Description</label>
                           <input type="text"  class="form-control" required  [(ngModel)]="description"  placeholder="Enter description "
                            [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !description}">
                           
                           <div *ngIf="registerButtonClicked && !description" class="error-message">description is required.</div>
                      </div>
        
        
                      <div class="col-md-3" >
                       
                        <label>Start Date</label>
                       <input type="date"  class="form-control" required  [(ngModel)]="start_date"  placeholder="Enter start date "
                        [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !start_date}">
                       
                       <div *ngIf="registerButtonClicked && !start_date" class="error-message">start date is required.</div>
                  </div>
        
                  <div class="col-md-3" >
                       
                    <label>End Date</label>
                   <input type="date"  class="form-control" required  [(ngModel)]="end_date"  placeholder="Enter end date "
                    [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !end_date}">
                   
                   <div *ngIf="registerButtonClicked && !end_date" class="error-message">end date is required.</div>
              </div>
        
              <div class="col-md-3" >
                <label>Holiday Calendar</label>
                <div class="custom-sel">

                    <select class="form-control" id="calendar" required [(ngModel)]="calendar"   [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !calendar}" >
                        <option value="" >Select</option>
                        <option *ngFor="let deparmentsec of HolidaysCalendar" [value]="deparmentsec.id">{{ deparmentsec.calendar_title     }} ({{ deparmentsec.year     }} )</option>
                    </select>
                    <div *ngIf="registerButtonClicked && !calendar" class="error-message">Please Select calendar </div>
                    
                    
                    <!-- <div class="form-control-wrapper">
                    <label>Holiday Calendar</label>


                    <mat-form-field>
                        <mat-select placeholder="Select" [(ngModel)]="calendar" [ngModelOptions]="{standalone: true}" #select multiple>
                          <div class="select-all">
                            <mat-checkbox [(ngModel)]="allSelected" [ngModelOptions]="{standalone: true}" (change)="toggleAllSelection()">
                              Select All
                            </mat-checkbox>
                          </div>
                          <mat-option *ngFor="let food of HolidaysCalendar" [value]="food.id">
                            {{ food.description }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      </div> -->

                  
                </div>
            </div>
        
          <div class="col-md-3">
            <label></label>
            <div class="check-box-selection-sec mt-2">
                <div class="mat-set">
                    <!-- <mat-checkbox [(ngModel)]="is_ess">Is_Ess User</mat-checkbox> -->
                    <mat-checkbox [(ngModel)]="restricted" [ngModelOptions]="{standalone: true}">Restricted</mat-checkbox>
                    <!-- <mat-checkbox [(ngModel)]="is_staff">Is_Staff</mat-checkbox> -->
                </div>
               
            </div>
        </div>
                    </div>
        
                
        
        <div class="row">
            <div class="col-md-10">
        
            </div>
        
            <div class="col-md-2">
                <button type="button" class="btn-Create btn-full mt-5 btn-success btn" (click)="registerHolidayCalendar()">Create</button>  
             </div>
        </div>
             
            </form>
                </mat-tab>

           
                </mat-tab-group> 

      


    <!-- <div>

        <div class="row mt-4">
            <div class="col-md-12">
                <label>Weekend Calendar</label>
                <div class="custom-sel">
                    <select class="form-control" (change)="selectCalendar($event)">
                        <option>select</option>
                        <option *ngFor="let calendar of calendars" [value]="calendar.id">
                          {{ calendar.calander_title }} ({{ calendar.year }})
                        </option>
                      </select>

                </div>
            </div>
        </div>
  
          <div *ngIf="selectedCalendar">

            <div class="row mt-4">
                <div class="col-md-4">
                    <p>Calendar Tittle</p>
                    <h1>{{ selectedCalendar.calander_title }}</h1>

                </div>

                <div class="col-md-4">
                    <p>Calendar Year</p>
                    <h1>{{ selectedCalendar.year }}</h1>

                </div>
                <div class="col-md-4">
                    <p>Calendar Description</p>
                    <h1>{{ selectedCalendar.description }}</h1>

                </div>
            </div>
         
            <table class="mt-2">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Day</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let day of yearDays">
                  <td>{{ day.date | date: 'yyyy-MM-dd' }}</td>
                  <td>{{ day.dayName }}</td>
                  <td>{{ day.status }}</td>
                </tr>
              </tbody>
            </table>
          </div>
      </div> -->

  


        </div>


     

       

        </div>

        <div class="com_list">
          <div class="cpm-sec">
              <h2>Holiday Calendar View</h2><hr>
              <div class="row">
                  <div class="col-md-6">
                      <label>Holiday Calendar</label>
                      <div class="custom-sel">
                          <select class="form-control" (change)="selectCalendar($event)">
                              <option>select</option>
                              <option *ngFor="let calendar of calendars" [value]="calendar.id">
                                  {{ calendar.calendar_title }} ({{ calendar.year }})
                              </option>
                          </select>
                      </div>
                  </div>
              </div>
      
              <div class="calendar_view_sec mt-5" *ngIf="selectedCalendar">
                  <div class="row">
                      <div class="col-md-4">
                          <h4>Calendar Description</h4>
                          <h5>{{ selectedCalendar.calendar_title }}</h5>
                      </div>
                      <div class="col-md-4">
                          <h4>Calendar Year</h4>
                          <h5>{{ selectedCalendar.year }}</h5>
                      </div>
                      <div class="col-md-4">
                          <h4>Holidays</h4>
                          <h5>{{ selectedCalendar.holidays?.length || 0 }}</h5> <!-- Debug length -->
                      </div>
                  </div>
      
                  <!-- Debugging to check if holidays array is being rendered -->
                  <div *ngIf="!selectedCalendar.holidays || selectedCalendar.holidays.length === 0">
                      <p>No holidays found for this calendar.</p>
                  </div>
      
                  <table class="table" *ngIf="selectedCalendar.holidays && selectedCalendar.holidays.length > 0">
                      <thead>
                          <tr>
                              <th>Description</th>
                              <th>Start Date</th>
                              <th>End Date</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let holiday of selectedCalendar.holidays">
                              <td>{{ holiday.description }}</td>
                              <td>{{ holiday.start_date }}</td>
                              <td>{{ holiday.end_date }}</td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
      </div>
      

  

</div>
</div>



